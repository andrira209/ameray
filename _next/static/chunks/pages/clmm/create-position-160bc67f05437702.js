(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5009],{10073:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clmm/create-position",function(){return n(58987)}])},6262:function(e,t,n){"use strict";n.d(t,{Ek:function(){return a},TL:function(){return m},vt:function(){return d},yc:function(){return u}});var l=n(75640),i=n(27713),s=n(4465),o=n(51523),r=n(84207);function c(e){let t=l.c2c.getPriceAndTick(e);return(0,i.JS)(t)}function a(e){let t=l.c2c.getTickPrice(e);return(0,i.JS)(t)}function d(e){let{coin1:t,coin2:n,reverse:l,ammPool:s,maxDecimals:a}=e;if(s)try{var d,u;let e=a||(t||n?Math.max(null!==(d=null==t?void 0:t.decimals)&&void 0!==d?d:0,null!==(u=null==n?void 0:n.decimals)&&void 0!==u?u:0):6),m=100===s.ammConfig.tradeFeeRate,p=m?.01:.2,x=(0,i.eZ)(null==s?void 0:s.state.currentPrice),f=(0,o.kg)(x?(0,o.dC)(x,1-p):0,1/10**e),b=(0,o.kg)(x?(0,o.dC)(x,1+p):0,1/10**e),{price:v,tick:h}=c({poolInfo:s.state,baseIn:!0,price:(0,i.I2)((0,r.Z)(f))}),{price:g,tick:y}=c({poolInfo:s.state,baseIn:!0,price:(0,i.I2)((0,r.Z)(b))});if(l)return{priceLowerTick:y,priceLower:(0,o.hi)(1,g),priceUpperTick:h,priceUpper:(0,o.hi)(1,v)};return{priceLowerTick:h,priceLower:v,priceUpperTick:y,priceUpper:g}}catch(e){return}}function u(e){let{p:t,coin1:n,coin2:l,reverse:o,ammPool:a,maxDecimals:d}=e,u=o?l:n;try{let{price:e,tick:n}=c({poolInfo:a.state,baseIn:(0,s.aT)(a.state.mintA.mint,null==u?void 0:u.mint),price:(0,i.I2)((0,r.Z)(Math.max(Number(t),1/10**(null!=d?d:6))))});return{price:e,tick:n}}catch(e){return}}function m(e){let{min:t,max:n,coin1:l,coin2:i,reverse:s,ammPool:o,maxDecimals:r}=e,c=u({p:t,coin1:l,coin2:i,ammPool:o,reverse:s,maxDecimals:r}),a=u({p:n,coin1:l,coin2:i,ammPool:o,reverse:s,maxDecimals:r});return{priceLower:c.price,priceLowerTick:c.tick,priceUpper:a.price,priceUpperTick:a.tick}}},13039:function(e,t,n){"use strict";n.d(t,{B:function(){return p},Z:function(){return m}});var l=n(8667),i=n(53002),s=n(34003),o=n(72573),r=n(75640),c=n(96662),a=n(42186),d=n(475),u=n(94678);function m(){let{currentAmmPool:e=u.ZP.getState().currentAmmPool,coin1:t=u.ZP.getState().coin1,coin2:n=u.ZP.getState().coin2,coin1Amount:i=u.ZP.getState().coin1Amount,coin2Amount:s=u.ZP.getState().coin2Amount,priceLower:r=u.ZP.getState().priceLower,priceUpper:c=u.ZP.getState().priceUpper,priceLowerTick:a=u.ZP.getState().priceLowerTick,priceUpperTick:d=u.ZP.getState().priceUpperTick,liquidity:m=u.ZP.getState().liquidity,onSuccess:x}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.ZP)(async l=>{var u,f;let{transactionCollector:b}=l,{innerTransactions:v,nftAddress:h}=await p({currentAmmPool:e,coin1:t,coin2:n,coin1Amount:i,coin2Amount:s,liquidity:m,priceLower:r,priceUpper:c,priceLowerTick:a,priceUpperTick:d});b.add(v,{onTxAllSuccess(){null==x||x({nftAddress:h})},txHistoryInfo:{title:"Position Created",forceErrorTitle:"Error creating position",description:"Added ".concat((0,o.B)(i)," ").concat(null!==(u=null==t?void 0:t.symbol)&&void 0!==u?u:"--"," and ").concat((0,o.B)(s)," ").concat(null!==(f=null==n?void 0:n.symbol)&&void 0!==f?f:"--")}})})}async function p(){let{priceLower:e=u.ZP.getState().priceLower,priceUpper:t=u.ZP.getState().priceUpper,coin1:n=u.ZP.getState().coin1,coin2:l=u.ZP.getState().coin2,coin1Amount:o=u.ZP.getState().coin1Amount,coin2Amount:m=u.ZP.getState().coin2Amount,liquidity:p=u.ZP.getState().liquidity,priceLowerTick:x=u.ZP.getState().priceLowerTick,priceUpperTick:f=u.ZP.getState().priceUpperTick,currentAmmPool:b=u.ZP.getState().currentAmmPool}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.ZP.getState(),{tokenAccountRawInfos:v}=i.Z.getState(),{connection:h}=c.ZP.getState(),{owner:g}=i.Z.getState();(0,s.Z)(h,"no rpc connection"),(0,s.Z)(g,"wallet not connected"),(0,s.Z)(b,"not seleted amm pool"),(0,s.Z)(void 0!==f,"not set priceUpperTick"),(0,s.Z)(void 0!==x,"not set priceLowerTick"),(0,s.Z)(t,"not set priceUpper"),(0,s.Z)(e,"not set priceLower"),(0,s.Z)(n,"not set coin1"),(0,s.Z)(o,"not set coin1Amount"),(0,s.Z)(l,"not set coin2"),(0,s.Z)(m,"not set coin2Amount"),(0,s.Z)(p,"not set liquidity");let y=(0,a.Dn)(n)||(0,a.Dn)(l),{innerTransactions:P,address:Z}=await r.c2c.makeOpenPositionInstructionSimple({connection:h,liquidity:p,poolInfo:b.state,ownerInfo:{feePayer:g,wallet:g,tokenAccounts:v,useSOLBalance:y},tickLower:Math.min(x,f),tickUpper:Math.max(x,f),slippage:.015,computeBudgetConfig:await (0,d.u)(),checkCreateATAOwner:!0});return{innerTransactions:P,nftAddress:String(Z.nftMint)}}},7931:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var l=n(67294),i=n(12839);function s(e,t,n){var s;let o="all .4s cubic-bezier(0.4, 0, 0.2, 1)",[r,c]=(0,l.useState)(null!==(s=null==n?void 0:n.defaultHasWrapped)&&void 0!==s&&s);(0,l.useEffect)(function(){if(i.N9||!(null==n?void 0:n.defaultHasWrapped))return;let l=e.current,s=t.current;if(!l||!s)return;let o=l.getBoundingClientRect(),r=s.getBoundingClientRect(),c=r.top-o.top,a=o.top<r.top?1:-1;l.style.setProperty("transition",""),s.style.setProperty("transition",""),l.style.setProperty("transform","translateY(".concat(c*a,"px)")),s.style.setProperty("transform","translateY(".concat(-c*a,"px)"))},[]);let a=(0,l.useCallback)(()=>{let n=e.current,l=t.current;if(!n||!l)return;let i=n.getBoundingClientRect(),s=l.getBoundingClientRect(),a=s.top-i.top,d=i.top<s.top?1:-1;n.style.setProperty("transition",o),l.style.setProperty("transition",o),r?(n.style.setProperty("transform","translateY(0px)"),l.style.setProperty("transform","translateY(0px)"),c(!1)):(n.style.setProperty("transform","translateY(".concat(a*d,"px)")),l.style.setProperty("transform","translateY(".concat(-a*d,"px)")),c(!0))},[r,e,t]),d=(0,l.useCallback)(()=>{let n=e.current,l=t.current;n&&l&&(n.style.setProperty("transition",o),l.style.setProperty("transition",o),n.style.setProperty("transform","translateY(0px)"),l.style.setProperty("transform","translateY(0px)"))},[r,e,t]);return(0,l.useEffect)(()=>{let n=e.current,l=t.current,i=()=>{null==n||n.style.setProperty("pointerEvents","none")},s=()=>{null==n||n.style.setProperty("pointerEvents","")};return null==n||n.addEventListener("transitionstart",i),null==n||n.addEventListener("transitionend",s),null==l||l.addEventListener("transitionstart",i),null==l||l.addEventListener("transitionend",s),()=>{null==n||n.removeEventListener("transitionstart",i),null==n||n.removeEventListener("transitionend",s),null==l||l.removeEventListener("transitionstart",i),null==l||l.removeEventListener("transitionend",s)}},[e,t]),[r,{toggleSwap:a,resetSwapPosition:d}]}},58625:function(e,t,n){"use strict";n.d(t,{a:function(){return x}});var l=n(85893),i=n(53002),s=n(51523),o=n(81451),r=n(42186),c=n(72573),a=n(48162),d=n(28948),u=n(51800),m=n(92618),p=n(66180);function x(e){let{solLeastBalance:t,className:n,tooltipText:x}=e,f=(0,i.Z)(e=>e.solBalance),b=(0,s.hi)(f,10**r.Bk);return(0,l.jsx)(d.U,{children:b&&(0,o.lt)(b,null!=t?t:r.kn)&&(0,o.eg)(b,0)&&(0,l.jsxs)(u.Z,{className:(0,p.m)("text-sm mt-2 text-[#D8CB39] items-center justify-center",n),children:["SOL balance: ",(0,c.B)(b)," ",(0,l.jsxs)(m.Z,{placement:"bottom-right",children:[(0,l.jsx)(a.Z,{size:"sm",heroIconName:"question-mark-circle",className:"ml-2 cursor-help"}),(0,l.jsx)(m.Z.Panel,{children:(0,l.jsx)("p",{className:"w-80",children:null!=x?x:"SOL is needed for Solana network fees. A minimum balance of ".concat(null!=t?t:r.kn," SOL is\n                recommended to avoid failed transactions. This swap will leave you with less than \n                ").concat(null!=t?t:r.kn," SOL.")})})]})]})})}},58987:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eZ}});var l=n(85893),i=n(67294),s=n(90482),o=n(66180),r=n(91371),c=n(6262),a=n(13039),d=n(94678),u=n(52784),m=n(76961),p=n(31166),x=n(11163),f=n(94355),b=n(56603),v=n(4465),h=n(16938),g=n(26842),y=n(99779),P=n(96662),Z=n(25222),j=n(80582);function k(e){var t,n;let l={ammId:String(null!==(n=null!==(t=e.ammId)&&void 0!==t?t:e.ammid)&&void 0!==n?n:"")};return(0,h.dI)(l)}var N=n(31555),w=n(27713),S=n(53002),C=n(43067),T=n(54531),L=n(97664),A=n(54592),E=n(88132),I=n(28948),B=n(60421),R=n(48162),F=n(57571),M=n(33674),U=n(51800),D=n(3363),z=n(18074),O=n(62952),q=n(95865),_=n(81451),H=n(8951),Y=n(14209),$=n(51523),V=n(71375),W=n(84207),X=n(72573),J=n(32825),Q=n(47857),K=n(7931),G=n(92224),ee=n(99023),et=n(40816);let en="mobile:justify-center mobile:w-1/2";function el(e){let{coin1:t,coin2:n,fee:s,focusSide:o,onChangeFocus:r}=e,c=(0,i.useMemo)(()=>{let e=[];return t&&e.push({label:"".concat(t.symbol||"Unknown"," price"),value:t.id,className:en}),n&&e.push({label:"".concat(n.symbol||"Unknown"," price"),value:n.id,className:en}),e},[t,n]),a=(0,i.useCallback)(e=>{r(e.value===n.id?"coin2":"coin1")},[n]);return(0,l.jsxs)("div",{className:"flex justify-between items-center mb-[27px] mobile:flex-col mobile:items-baseline mobile:mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center mobile:mb-2",children:[(0,l.jsx)(T.Z,{size:"lg",token1:t,token2:n}),(0,l.jsxs)("span",{className:"ml-2 text-xl font-medium mobile:text-lg text-white",children:[(null==t?void 0:t.symbol)||"-"," / ",(null==n?void 0:n.symbol)||"-"]}),(0,l.jsxs)("div",{className:"px-2.5 py-1 ml-2 rounded-lg text-sm text-secondary-title bg-active-tab-bg",children:["Pool Fee ",s||"-"]})]}),(0,l.jsx)("div",{className:"flex items-center mobile:w-full",children:t&&n&&(0,l.jsx)(et.Z,{classNames:"ml-4 mobile:w-full mobile:ml-0",tabs:c,selectedValue:"coin1"===o?t.id:null==n?void 0:n.id,onChange:a})})]})}var ei=n(58625),es=n(54103),eo=n(67858),er=n(96256);function ec(){return(0,l.jsxs)("div",{className:"absolute text-sm flex flex-col border-1.5 border-[#abc4ff40] text-center justify-center items-center p-2 w-full h-full bg-[#141041] bg-opacity-80 z-10 rounded-xl",children:[(0,l.jsx)(R.Z,{className:"mb-1",heroIconName:"lock-closed",size:"sm"}),"Current price is outside your selected range. Single-asset deposit only."]})}var ea=n(71122),ed=n(99522),eu=n(6994),em=n(70745),ep=n(65927),ex=n(40471),ef=n(48678),eb=n(52719);function ev(e){var t,n;let{open:s,haveEnoughCoin1:c,haveEnoughCoin2:a,coin1:d,coin2:u,coin1Amount:m,coin2Amount:p,decimals:x,currentPrice:f,position:b,gettedNFTAddress:v,totalDeposit:h,feeRate:g,inRange:y,onBackToAllMyPools:P,onConfirm:Z,onClose:j,onRefreshSnapshot:k,isSnapshotDataFresh:N}=e,w=function(e){let[t,n]=(0,i.useState)(!1);return(0,eb.L)(()=>{n(!1)},[e.restartState]),(0,eb.L)(()=>{e.freshState&&n(!0)},[e.freshState]),t}({freshState:N,restartState:s}),S=(0,i.useRef)(!1),T=Math.min(null!=x?x:6,6),L=(0,r.ZP)(e=>e.isApprovePanelShown),E=(0,i.useCallback)(e=>{null==Z||Z(e),S.current=!0},[j]),I=!!v,B=(0,i.useCallback)(()=>{j()},[j]);return(0,l.jsx)(ep.Z,{open:s,onClose:B,children:e=>{let{close:i}=e;return(0,l.jsx)(eu.Z,{className:(0,o.m)("p-6 mobile:py-4 mobile:px-2 rounded-3xl w-[min(480px,95vw)] mx-8 border-1.5 border-[rgba(171,196,255,0.2)]  bg-cyberpunk-card-bg shadow-cyberpunk-card"),size:"lg",children:I?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(U.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsx)("div",{className:"text-xl font-semibold text-white mobile:text-base",children:"Deposit Confirmed"}),(0,l.jsx)(R.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:i})]}),(0,l.jsxs)("div",{className:"my-4 mx-4 space-y-4",children:[(0,l.jsx)("div",{className:"text-sm text-[#ABC4FF] font-medium",children:"A new NFT representing your Concentrated Liquidity position is now in your wallet."}),(0,l.jsxs)(A.Z,{className:"gap-2 items-center",children:[(0,l.jsx)(ex.Z,{src:"https://cloudflare-ipfs.com/ipfs/Qme9ErqmQaznzpfDACncEW48NyXJPFP7HgzfoNdto9xQ9P/02.jpg",className:"h-44 w-44"}),(0,l.jsxs)(U.Z,{className:"text-sm text-[#ABC4FF] font-medium gap-2",children:[(0,l.jsx)("div",{children:"NFT Mint:"}),(0,l.jsx)(ed.U,{canCopy:!0,canExternalLink:!0,addressType:"token",children:v})]})]}),(0,l.jsxs)("div",{className:"text-sm text-[#ABC4FF] font-medium",children:[(0,l.jsx)("strong",{className:"text-base",children:"DO NOT"})," burn this NFT or you will be unable to remove liquidity! If you send the NFT to another wallet, only the new wallet will be able to remove liquidity."]})]}),(0,l.jsx)(A.Z,{className:"items-center mt-5 mobile:mt-3",children:(0,l.jsx)("div",{className:"self-stretch",children:(0,l.jsx)(A.Z,{children:(0,l.jsx)(C.Z,{className:"frosted-glass-teal",onClick:P,children:"View My Pools"})})})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(U.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsxs)("div",{className:"text-xl font-semibold text-white mobile:text-base",children:["Preview Deposit to ",null==d?void 0:d.symbol," / ",null==u?void 0:u.symbol]}),(0,l.jsx)(R.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:i})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"My Position"}),(0,l.jsxs)("div",{className:"text-sm flex leading-[18px] flex-col pt-2.5",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-2.5",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(em.Z,{className:"inline-block mr-1",size:"sm",token:d}),null==d?void 0:d.symbol]}),(0,l.jsxs)("span",{children:[(0,X.B)(m)," ",null==d?void 0:d.symbol]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(em.Z,{className:"inline-block mr-1",size:"sm",token:u}),null==u?void 0:u.symbol]}),(0,l.jsxs)("span",{children:[(0,X.B)(p)," ",null==u?void 0:u.symbol]})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-2 pl-1",children:[(0,l.jsx)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:"Fee tier"}),(0,l.jsx)("span",{children:(0,z.Z)((g||0)/1e6)})]})]})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{className:"text-sm flex justify-between items-end leading-[18px] font-medium mb-2 mobile:text-xs",children:[(0,l.jsx)("span",{className:"flex text-sm text-secondary-title leading-[18px] mr-2",children:"Current Price"}),f?(0,ef.C)((0,X.B)(f,{decimalLength:T})):"0"," ",null==u?void 0:u.symbol," per ",null==d?void 0:d.symbol]}),(0,l.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Selected Range"}),(0,l.jsx)("span",{children:y?(0,l.jsxs)(U.Z,{className:"items-center bg-[#142B45] rounded text-xs text-[#39D0D8] py-0.5 px-1 ml-2",children:[(0,l.jsx)(R.Z,{size:"xs",iconSrc:"/icons/check-circle.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"In Range"})]}):(0,l.jsxs)(U.Z,{className:"items-center bg-[#DA2EEF]/10 rounded text-xs text-[#DA2EEF] py-0.5 px-1 ml-2",children:[(0,l.jsx)(R.Z,{size:"xs",iconSrc:"/icons/warn-stick.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"Out of Range"})]})})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Min Price"}),(0,l.jsx)("div",{className:"text-xl my-3",children:(0,X.B)(null==b?void 0:b.min,{decimalLength:T})}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==u?void 0:u.symbol," per ",null==d?void 0:d.symbol]})]}),(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Max Price"}),(0,l.jsx)("div",{className:"text-xl my-3",children:(0,X.B)(null==b?void 0:b.max,{decimalLength:T})}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==u?void 0:u.symbol," per ",null==d?void 0:d.symbol]})]})]})]}),(0,l.jsx)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg",children:h})]})}),(0,l.jsx)(A.Z,{className:"items-center mt-5 mobile:mt-3",children:(0,l.jsx)("div",{className:"self-stretch",children:(0,l.jsx)(A.Z,{children:(0,l.jsx)(C.Z,{className:"frosted-glass-teal",isLoading:L,validators:[{should:N,forceActive:!0,fallbackProps:{onClick:()=>{k()},children:"Refresh Position"}},w?{should:y,fallbackProps:{children:"Out of Range"}}:void 0,{should:c,fallbackProps:{children:"Insufficient ".concat(null!==(t=null==d?void 0:d.symbol)&&void 0!==t?t:""," balance")}},{should:a,fallbackProps:{children:"Insufficient ".concat(null!==(n=null==u?void 0:u.symbol)&&void 0!==n?n:""," balance")}}],onClick:()=>E(i),children:"Confirm Deposit"})})})})]})})}})}var eh=n(74365),eg=n(63675);let{ContextProvider:ey,useStore:eP}=(0,J.Z)({hasAcceptedPriceChange:!1,coinInputBox1ComponentRef:(0,i.createRef)(),coinInputBox2ComponentRef:(0,i.createRef)(),liquidityButtonComponentRef:(0,i.createRef)()});function eZ(){return(0,l.jsxs)(ey,{children:[(0,l.jsx)(eN,{}),(0,l.jsxs)(F.Z,{mobileBarTitle:"Concentrated",metaTitle:"Concentrated - Raydium",children:[(0,l.jsx)(ej,{}),(0,l.jsx)(ew,{})]})]})}function ej(){return(0,l.jsx)(U.Z,{className:(0,o.m)("-mt-4 mobile:mt-0.5 mb-8 mobile:mb-2 sticky z-auto -top-4 mobile:top-0 mobile:-translate-y-2 mobile:bg-[#0f0b2f] mobile:hidden items-center justify-between"),children:(0,l.jsx)(C.Z,{type:"text",className:"text-sm text-[#ABC4FF] opacity-50 px-0",prefix:(0,l.jsx)(R.Z,{heroIconName:"chevron-left",size:"sm"}),onClick:()=>{(0,N.ES)("/clmm/pools")},children:"Back to all pools"})})}function ek(){return(0,l.jsx)(U.Z,{className:(0,o.m)("-mt-4 mobile:mt-0.5 mb-8 mobile:mb-2 sticky z-10 -top-4 mobile:top-0 mobile:-translate-y-2 mobile:bg-[#0f0b2f] items-center justify-between"),children:(0,l.jsx)(C.Z,{type:"text",className:"text-sm text-[#ABC4FF] px-0",prefix:(0,l.jsx)(R.Z,{heroIconName:"chevron-left"}),onClick:()=>{(0,N.ES)("/clmm/pools")}})})}function eN(){return!function(){let{query:e,pathname:t,replace:n}=(0,x.useRouter)(),l=(0,d.ZP)(e=>e.hydratedAmmPools),s=(0,d.ZP)(e=>e.currentAmmPool),o=(0,P.ZP)(e=>e.connection),c=(0,p.ZP)(e=>e.getToken),a=(0,r.ZP)(e=>e.inCleanUrlMode),[u,m]=(0,i.useState)(!1),N=(0,i.useCallback)(e=>l.find(t=>t.idString===e),[l]);(0,i.useEffect)(()=>{t.includes("/clmm/create-position")||m(!1)},[t]),(0,i.useEffect)(()=>{let e=()=>m(!1);return null==globalThis||globalThis.addEventListener("beforeunload",e),()=>null==globalThis?void 0:globalThis.removeEventListener("beforeunload",e)},[]),(0,g.Z)(async()=>{if(!t.includes("/clmm/create-position")||!o||u)return;let{logWarning:n}=f.Z.getState(),{ammId:i}=k(e);if(i&&l.length>0){let e=i?N(i):void 0,t=(0,Z.w)(e);e&&t?d.ZP.setState({currentAmmPool:e,coin1:e.base,coin2:e.quote}):(d.ZP.setState({coin1:c(j.PD),coin2:c(j.LA)}),l.length>0&&n("can't find Liquidity pool with url ammId"))}l.length>0&&m(!0)},[u,o,t,e,l,N]);let w=(0,i.useCallback)((0,b.P)((e,t)=>{n({pathname:e,query:t},void 0,{shallow:!0})},{delay:500}),[n]);(0,y.P)(()=>{if(!t.includes("/clmm/create-position")||!u||a)return;let n=k(e),l=(0,h.dI)({ammId:null==s?void 0:s.idString}),i=!(0,v.Ek)(n,l);i&&w(t,l)},[u,a,s,e,t])}(),(0,u.Z)(),(0,m.Z)(),!function(){(0,p.ZP)(e=>e.getToken);let e=(0,p.ZP)(e=>e.tokens);(0,i.useEffect)(()=>{let{coin1:t,coin2:n,currentAmmPool:l}=d.ZP.getState();!t&&!n&&Object.keys(e).length&&l&&d.ZP.setState({coin1:l.base,coin2:l.quote})},[e])}(),null}function ew(){var e,t,n,o,u,m,x;let f=(0,S.Z)(e=>e.getBalance),[b,h,g]=(0,d.ZP)(e=>[e.chartPoints,e.loadChartPointsAct,e.lazyLoadChart]),P=(0,S.Z)(e=>e.connected),[Z,{off:j,on:k}]=(0,G.ZP)(!1),B=(0,r.ZP)(e=>e.isApprovePanelShown),F=(0,S.Z)(e=>e.checkWalletHasEnoughBalance),U=(0,d.ZP)(e=>e.timeBasis),J=(0,d.ZP)(e=>e.coin1),et=(0,d.ZP)(e=>e.coin1Amount),en=(0,d.ZP)(e=>e.coin2),es=(0,d.ZP)(e=>e.coin2Amount),eo=(0,d.ZP)(e=>e.focusSide),er=(0,d.ZP)(e=>e.currentAmmPool),ea=(0,d.ZP)(e=>e.hydratedAmmPools),ed=(0,d.ZP)(e=>e.priceUpper),eu=(0,d.ZP)(e=>e.priceLower),em=(0,d.ZP)(e=>e.refreshConcentrated),ep=(0,p.ZP)(e=>e.refreshTokenPrice),[ex,ef]=(0,i.useState)({}),eb="".concat(null==er?void 0:er.idString,"-").concat(eo),ey=function(e){let t=(0,i.useRef)();return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}(eb),eZ=(0,i.useRef)(),ej=(0,i.useRef)({lower:void 0,upper:void 0}),eN=J||en?Math.max(null!==(n=null==J?void 0:J.decimals)&&void 0!==n?n:0,null!==(o=null==en?void 0:en.decimals)&&void 0!==o?o:0):6,ew=(0,v.aT)(null==er?void 0:er.state.mintA.mint,J),eC="coin1"===eo,eT=eC&&ew||!ew&&!eC,eL=(0,i.useMemo)(()=>{let e=b?(0,ee.Mn)(b):void 0;return eT?e:e?e.map(e=>({x:1/e.x,y:e.y})).reverse():void 0},[b,eT]),eA=(0,i.useMemo)(()=>Math.pow(-1,ew?eC?0:1:eC?1:0),[ew,eC]),eE=er?[er.state[d.v$[U]].priceMin,er.state[d.v$[U]].priceMax]:[void 0,void 0];eT||(eE.reverse(),eE[0]=eE[0]?1/eE[0]:eE[0],eE[1]=eE[1]?1/eE[1]:eE[1]);let{coinInputBox1ComponentRef:eI,coinInputBox2ComponentRef:eB,liquidityButtonComponentRef:eR}=eP(),eF=(0,i.useRef)(null),eM=(0,i.useRef)(null),[,{toggleSwap:eU}]=(0,K.H)(eF,eM);(0,y.P)(e=>{let[t]=e;t&&t!==eo&&eU()},[eo]);let eD=(0,i.useMemo)(()=>er?(0,w.eZ)(eT?er.state.currentPrice:new s.Z(1).div(er.state.currentPrice)):void 0,[null==er?void 0:er.state.currentPrice.toFixed(),eo]),ez=er?(0,w.eZ)(er.state.currentPrice):void 0,eO=er&&eD&&void 0!==eu&&void 0!==ed?[(0,V.Z)(ed||0,eN).lt((0,V.Z)(eD||0,eN)),(0,V.Z)(eu||0,eN).gt((0,V.Z)(eD||0,eN))]:[!1,!1];eC||eO.reverse();let[eq,e_]=eO;(0,i.useEffect)(()=>{g&&er&&h(er.idString)},[null==er?void 0:er.idString,h,g]),(0,i.useEffect)(()=>{eq&&d.ZP.setState({coin1Amount:"0"}),e_&&d.ZP.setState({coin2Amount:"0"})},[eq,e_]),(0,i.useEffect)(()=>()=>d.ZP.setState({lazyLoadChart:!1,focusSide:"coin1",userCursorSide:"coin1"}),[]);let eH=J&&(!(0,_.$u)(et)||F((0,O.n)(J,et,{alreadyDecimaled:!0}))),eY=en&&(!(0,_.$u)(es)||F((0,O.n)(en,es,{alreadyDecimaled:!0}))),e$=(0,i.useRef)(null);(0,i.useEffect)(()=>{d.ZP.setState({scrollToInputBox:()=>{var e;return null===(e=e$.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"center"})}})},[e$]);let eV=(0,Y.db)((null===(e=null==er?void 0:er.state.currentPrice)||void 0===e?void 0:e.toFixed(20))||"")+2,eW=(0,i.useMemo)(()=>(0,c.vt)({coin1:J,coin2:en,ammPool:er,reverse:!eT,maxDecimals:Math.max(eN,eV)}),[J,en,er,eT,eN,eV]);(0,i.useEffect)(()=>{eb!==ey&&eW&&(d.ZP.setState(eW),ej.current.lower=eW.priceLowerTick,ej.current.upper=eW.priceUpperTick)},[eW,eb,ey]);let[eX,eJ]=(0,i.useState)([]),eQ=(0,i.useCallback)(e=>eJ(t=>[null==e?void 0:e.toExact(),t[1]]),[]),eK=(0,i.useCallback)(e=>eJ(t=>[t[0],null==e?void 0:e.toExact()]),[]),eG=eX.filter(e=>!!e).reduce((e,t)=>e.add((0,W.Z)(t)),(0,W.Z)(0)),{ratio1:e0,ratio2:e1}=(0,ee.dO)({currentPrice:ez,coin1InputDisabled:eq,coin2InputDisabled:e_,coin1Amount:et,coin2Amount:es}),e2=(0,Q.z)(e=>{let t={price:e.min,tick:ej.current.lower};if(!er)return t;if(e[eg.e6.Min]>=e[eg.e6.Max]){let e=eC?J:en,t=ej.current.upper-er.state.tickSpacing*eA,{price:n,tick:l}=(0,c.Ek)({poolInfo:er.state,baseIn:(0,v.aT)(er.state.mintA.mint,null==e?void 0:e.mint),tick:t});return ej.current.lower=l,d.ZP.setState({priceLowerTick:l,priceLower:n}),{price:(0,H.V)({val:n.toFixed(10)}),tick:l}}return t}),e4=(0,i.useCallback)(e=>{let{side:t,userInput:n,...l}=e;if(!er||!J||!en||isNaN(l.min)||isNaN(l.max))return;let i=(0,c.TL)({...l,coin1:J,coin2:en,ammPool:er,reverse:!eC,maxDecimals:Math.max(eN,eV)}),s=t===eg.e6.Min,o=s?"priceLowerTick":"priceUpperTick";return n&&t?(ej.current[s?"lower":"upper"]=i[o],s&&d.ZP.setState({priceLowerTick:i[o],priceLower:i.priceLower}),s||d.ZP.setState({priceUpperTick:i[o],priceUpper:i.priceUpper})):(ej.current={lower:i.priceLowerTick,upper:i.priceUpperTick},d.ZP.setState(i)),i},[(0,D.ZP)(null==J?void 0:J.mint),(0,D.ZP)(null==en?void 0:en.mint),null==er?void 0:er.idString,eC,eV,eN]),e5=(0,i.useCallback)(e=>{let{p:t,isMin:n,isIncrease:l}=e;if(!er||!J||!en)return;let i=eC?J:en,s=n?"lower":"upper",o=ej.current[s]+(l?er.state.tickSpacing:-1*er.state.tickSpacing)*eA,{price:r}=(0,c.Ek)({poolInfo:er.state,baseIn:(0,v.aT)(er.state.mintA.mint,null==i?void 0:i.mint),tick:o});return n&&(0,_.eg)(r.toFixed(20),eZ.current.getPosition().max.toFixed(20))?(0,W.Z)(t):(ej.current[s]=o,n&&d.ZP.setState({priceLower:r,priceLowerTick:o}),n||d.ZP.setState({priceUpper:r,priceUpperTick:o}),r)},[null==J?void 0:J.mint,null==en?void 0:en.mint,null==er?void 0:er.idString,eA,eN]),e8=(0,Q.z)(()=>{ef({...d.ZP.getState(),coin1:J,coin2:en,coin1Amount:et,coin2Amount:es,decimals:eN,totalDeposit:(0,q.Z)(eG),feeRate:null==er?void 0:er.ammConfig.tradeFeeRate,inRange:!eO.some(e=>e),currentPrice:er?(0,w.eZ)(ew?er.state.currentPrice:new s.Z(1).div(er.state.currentPrice)):void 0,currentAmmPool:er})}),e3=(0,i.useMemo)(()=>(0,_.eq)(ex.coin1Amount,et)&&(0,_.eq)(ex.coin2Amount,es),[et,es,ex]),e6=(0,i.useCallback)(()=>{e8(),k()},[k,J,en,et,es,eN,eG,er,eO]),e7=(0,i.useMemo)(()=>({isStable:(null==er?void 0:er.ammConfig.tradeFeeRate)===100,baseIn:eT,points:eL||[],initMinBoundaryX:null==eW?void 0:eW.priceLower,initMaxBoundaryX:null==eW?void 0:eW.priceUpper}),[eL,eW,null==er?void 0:er.ammConfig.tradeFeeRate,eT]),[e9,te]=(0,i.useState)();return(0,l.jsxs)(E.Z,{domRef:e$,wrapperClassName:"w-[min(912px,100%)] self-center cyberpunk-bg-light",className:"p-6 mobile:py-5 mobile:px-3",children:[(0,l.jsx)("div",{className:"absolute -left-8 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,l.jsx)(ek,{})}),(0,l.jsx)(el,{coin1:J,coin2:en,fee:(0,z.Z)(null==er?void 0:er.tradeFeeRate,{exact:!0}),focusSide:eo,onChangeFocus:e=>d.ZP.setState({focusSide:e})}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row flex-gap-1 gap-3 mb-3",children:[(0,l.jsxs)(A.Z,{className:"gap-5 bg-dark-blue rounded-xl flex flex-col w-full sm:w-1/2 px-3 py-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between align-top mb-3",children:[(0,l.jsx)("div",{className:"text-base leading-[22px] text-secondary-title ",children:"Deposit Amount"}),(0,l.jsx)(M.Z,{disabled:Z,refreshKey:"clmm-pools",freshFunction:()=>{ep(),em()}})]}),(0,l.jsxs)("div",{ref:eF,className:"relative",children:[eq&&(0,l.jsx)(ec,{}),(0,l.jsx)(L.Z,{className:"mb-4 py-2 mobile:py-1 px-3 mobile:px-2 border-1.5 border-[#abc4ff40]",disabled:B,disabledInput:!er||eq,noDisableStyle:!0,componentRef:eI,value:er?(0,X.B)(et):void 0,haveHalfButton:!0,HTMLTitleTooltip:(0,D.ZP)(null==J?void 0:J.mint),topLeftLabel:J?"".concat((0,D.ZP)(J.mint).slice(0,5),"...").concat((0,D.ZP)(J.mint).slice(-5)):void 0,haveCoinIcon:!0,maxValue:J&&f(J)?(0,O.n)(J,(0,$.dC)(f(J),.985),{alreadyDecimaled:!0}):void 0,onPriceChange:eQ,disableTokenSelect:!0,onUserInput:e=>{d.ZP.setState({coin1Amount:e,userCursorSide:"coin1"})},onEnter:e=>{var t,n,l,i;e&&(en||null===(t=eB.current)||void 0===t||null===(n=t.selectToken)||void 0===n||n.call(t),en&&es&&(null===(l=eR.current)||void 0===l||null===(i=l.click)||void 0===i||i.call(l)))},token:J})]}),(0,l.jsxs)("div",{ref:eM,className:"relative",children:[e_&&(0,l.jsx)(ec,{}),(0,l.jsx)(L.Z,{className:"py-2 mobile:py-1 px-3 mobile:px-2 border-1.5 border-[#abc4ff40]",componentRef:eB,disabled:B,disabledInput:!er||e_,noDisableStyle:!0,value:er?(0,X.B)(es):void 0,HTMLTitleTooltip:(0,D.ZP)(null==en?void 0:en.mint),topLeftLabel:en?"".concat((0,D.ZP)(en.mint).slice(0,5),"...").concat((0,D.ZP)(en.mint).slice(-5)):void 0,haveHalfButton:!0,haveCoinIcon:!0,maxValue:en&&f(en)?(0,O.n)(en,(0,$.dC)(f(en),.985),{alreadyDecimaled:!0}):void 0,onPriceChange:eK,disableTokenSelect:!0,onEnter:e=>{var t,n,l,i;e&&(J||null===(t=eI.current)||void 0===t||null===(n=t.selectToken)||void 0===n||n.call(t),J&&et&&(null===(l=eR.current)||void 0===l||null===(i=l.click)||void 0===i||i.call(l)))},onUserInput:e=>{d.ZP.setState({coin2Amount:e,userCursorSide:"coin2"})},token:en})]})]}),(0,l.jsxs)("div",{className:"border-1.5 border-[#abc4ff40]  rounded-xl px-3 py-4",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg leading-[18px]",children:er&&((0,_.$u)(et)||(0,_.$u)(es))?(0,q.Z)(eG):"--"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Deposit Ratio"}),(0,l.jsxs)("span",{className:"text-lg flex leading-[18px]",children:[er&&(0,l.jsx)(T.Z,{size:"sm",token1:J,token2:en}),er&&((0,_.$u)(et)||(0,_.$u)(es))?"".concat(null!=e0?e0:"--","% / ").concat(null!=e1?e1:"--","%"):"--"]})]})]}),eq||e_?(0,l.jsx)(I.U,{children:(0,l.jsxs)("div",{className:"flex items-center p-3 bg-[#2C2B57] rounded-xl text-sm text-[#D6CC56]",children:[(0,l.jsx)(R.Z,{size:"sm",className:"mr-1.5",heroIconName:"exclamation-circle"}),"Your position will not trade or earn fees until price moves into your range."]})}):"",(0,l.jsx)(C.Z,{className:"frosted-glass-teal w-full mt-auto",componentRef:eR,isLoading:B,validators:[{should:P,forceActive:!0,fallbackProps:{onClick:()=>r.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:er,fallbackProps:{children:"Pool Not Found"}},{should:(0,_.gt)((0,$.lu)(ed,eu),(0,$.hi)(eD,1e3)),fallbackProps:{children:"Range too small"}},{should:J&&en,fallbackProps:{children:"Select a token"}},{should:(0,_.$u)(et)||(0,_.$u)(es),fallbackProps:{children:"Enter an amount"}},{should:eH,fallbackProps:{children:"Insufficient ".concat(null!==(u=null==J?void 0:J.symbol)&&void 0!==u?u:""," balance")}},{should:eY,fallbackProps:{children:"Insufficient ".concat(null!==(m=null==en?void 0:en.symbol)&&void 0!==m?m:""," balance")}}],onClick:()=>{e6()},children:"Preview"}),(0,l.jsx)(ei.a,{})]}),(0,l.jsxs)("div",{className:"relative bg-dark-blue min-h-[180px] rounded-xl w-full sm:w-1/2 px-3 py-4 ".concat(er?"":"pointer-events-none select-none"),children:[!er&&(0,l.jsx)("div",{className:"absolute inset-0 z-10 grid grid-child-center backdrop-blur-md text-[#abc4ff]",children:ea.length?"Pool Not Found":"Loading..."}),(0,l.jsx)(eh.Z,{poolFocusKey:eb,title:(0,l.jsx)("div",{className:"text-base leading-[22px] text-secondary-title mb-3",children:"Set Price Range"}),ref:eZ,chartOptions:e7,currentPrice:eD,priceMin:eE[0],priceMax:eE[1],priceLabel:eC?"".concat(null==en?void 0:en.symbol," per ").concat(null==J?void 0:J.symbol):"".concat(null==J?void 0:J.symbol," per ").concat(null==en?void 0:en.symbol),timeBasis:U,decimals:eN,onPositionChange:e4,onInDecrease:e5,onAdjustMin:e2,showZoom:!0,height:200}),(0,l.jsx)(eS,{})]})]}),(0,l.jsx)(ev,{onRefreshSnapshot:e8,isSnapshotDataFresh:e3,haveEnoughCoin1:eH,haveEnoughCoin2:eY,open:Z,coin1:ex.coin1,coin2:ex.coin2,coin1Amount:ex.coin1Amount,coin2Amount:ex.coin2Amount,decimals:ex.decimals,position:null===(t=eZ.current)||void 0===t?void 0:t.getPosition(),totalDeposit:null!==(x=ex.totalDeposit)&&void 0!==x?x:(0,q.Z)(0),feeRate:ex.feeRate,inRange:ex.inRange,currentPrice:ex.currentPrice,gettedNFTAddress:e9,onConfirm:e=>(0,a.Z)({...ex,onSuccess(e){let{nftAddress:t}=e;te(t)}}),onBackToAllMyPools:()=>{em(),(0,N.Eh)("/clmm/pools",{queryProps:{currentTab:d.u0.MY_POOLS}})},onClose:()=>{j(),te(void 0)}})]})}function eS(e){let{className:t}=e,n=(0,d.ZP)(e=>e.currentAmmPool),i=(0,ea.HU)({ammPool:n}),s=(0,r.ZP)(e=>e.isMobile);return(0,l.jsxs)(A.Z,{className:(0,o.m)("bg-[#141041] py-3 my-1 rounded-xl gap-2",t),children:[(0,l.jsxs)(U.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"text-base leading-[22px] text-secondary-title",children:"Estimated APR"}),(0,l.jsx)(eo.T,{}),(0,l.jsx)("div",{className:"font-medium text-base mobile:text-sm text-white",children:(0,z.Z)(null==i?void 0:i.apr)}),(0,l.jsx)(er.n,{className:"ml-auto"})]}),n&&(0,l.jsx)(B.Z,{className:"border-1.5 border-[#abc4ff40] py-3 px-4 rounded-xl",children:(0,l.jsx)(es.E,{type:"poolTickInfo",colCount:s?1:2,poolInfo:n})})]})}}},function(e){e.O(0,[4740,9916,7571,8667,7664,4109,837,9774,2888,179],function(){return e(e.s=10073)}),_N_E=e.O()}]);