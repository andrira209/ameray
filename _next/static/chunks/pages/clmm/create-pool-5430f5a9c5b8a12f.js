(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5355],{71716:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clmm/create-pool",function(){return n(34472)}])},6262:function(e,t,n){"use strict";n.d(t,{Ek:function(){return c},TL:function(){return m},vt:function(){return d},yc:function(){return u}});var i=n(75640),l=n(27713),s=n(4465),o=n(51523),a=n(84207);function r(e){let t=i.c2c.getPriceAndTick(e);return(0,l.JS)(t)}function c(e){let t=i.c2c.getTickPrice(e);return(0,l.JS)(t)}function d(e){let{coin1:t,coin2:n,reverse:i,ammPool:s,maxDecimals:c}=e;if(s)try{var d,u;let e=c||(t||n?Math.max(null!==(d=null==t?void 0:t.decimals)&&void 0!==d?d:0,null!==(u=null==n?void 0:n.decimals)&&void 0!==u?u:0):6),m=100===s.ammConfig.tradeFeeRate,p=m?.01:.2,x=(0,l.eZ)(null==s?void 0:s.state.currentPrice),f=(0,o.kg)(x?(0,o.dC)(x,1-p):0,1/10**e),v=(0,o.kg)(x?(0,o.dC)(x,1+p):0,1/10**e),{price:b,tick:h}=r({poolInfo:s.state,baseIn:!0,price:(0,l.I2)((0,a.Z)(f))}),{price:Z,tick:g}=r({poolInfo:s.state,baseIn:!0,price:(0,l.I2)((0,a.Z)(v))});if(i)return{priceLowerTick:g,priceLower:(0,o.hi)(1,Z),priceUpperTick:h,priceUpper:(0,o.hi)(1,b)};return{priceLowerTick:h,priceLower:b,priceUpperTick:g,priceUpper:Z}}catch(e){return}}function u(e){let{p:t,coin1:n,coin2:i,reverse:o,ammPool:c,maxDecimals:d}=e,u=o?i:n;try{let{price:e,tick:n}=r({poolInfo:c.state,baseIn:(0,s.aT)(c.state.mintA.mint,null==u?void 0:u.mint),price:(0,l.I2)((0,a.Z)(Math.max(Number(t),1/10**(null!=d?d:6))))});return{price:e,tick:n}}catch(e){return}}function m(e){let{min:t,max:n,coin1:i,coin2:l,reverse:s,ammPool:o,maxDecimals:a}=e,r=u({p:t,coin1:i,coin2:l,ammPool:o,reverse:s,maxDecimals:a}),c=u({p:n,coin1:i,coin2:l,ammPool:o,reverse:s,maxDecimals:a});return{priceLower:r.price,priceLowerTick:r.tick,priceUpper:c.price,priceUpperTick:c.tick}}},13039:function(e,t,n){"use strict";n.d(t,{B:function(){return p},Z:function(){return m}});var i=n(8667),l=n(53002),s=n(34003),o=n(72573),a=n(75640),r=n(96662),c=n(42186),d=n(475),u=n(94678);function m(){let{currentAmmPool:e=u.ZP.getState().currentAmmPool,coin1:t=u.ZP.getState().coin1,coin2:n=u.ZP.getState().coin2,coin1Amount:l=u.ZP.getState().coin1Amount,coin2Amount:s=u.ZP.getState().coin2Amount,priceLower:a=u.ZP.getState().priceLower,priceUpper:r=u.ZP.getState().priceUpper,priceLowerTick:c=u.ZP.getState().priceLowerTick,priceUpperTick:d=u.ZP.getState().priceUpperTick,liquidity:m=u.ZP.getState().liquidity,onSuccess:x}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.ZP)(async i=>{var u,f;let{transactionCollector:v}=i,{innerTransactions:b,nftAddress:h}=await p({currentAmmPool:e,coin1:t,coin2:n,coin1Amount:l,coin2Amount:s,liquidity:m,priceLower:a,priceUpper:r,priceLowerTick:c,priceUpperTick:d});v.add(b,{onTxAllSuccess(){null==x||x({nftAddress:h})},txHistoryInfo:{title:"Position Created",forceErrorTitle:"Error creating position",description:"Added ".concat((0,o.B)(l)," ").concat(null!==(u=null==t?void 0:t.symbol)&&void 0!==u?u:"--"," and ").concat((0,o.B)(s)," ").concat(null!==(f=null==n?void 0:n.symbol)&&void 0!==f?f:"--")}})})}async function p(){let{priceLower:e=u.ZP.getState().priceLower,priceUpper:t=u.ZP.getState().priceUpper,coin1:n=u.ZP.getState().coin1,coin2:i=u.ZP.getState().coin2,coin1Amount:o=u.ZP.getState().coin1Amount,coin2Amount:m=u.ZP.getState().coin2Amount,liquidity:p=u.ZP.getState().liquidity,priceLowerTick:x=u.ZP.getState().priceLowerTick,priceUpperTick:f=u.ZP.getState().priceUpperTick,currentAmmPool:v=u.ZP.getState().currentAmmPool}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.ZP.getState(),{tokenAccountRawInfos:b}=l.Z.getState(),{connection:h}=r.ZP.getState(),{owner:Z}=l.Z.getState();(0,s.Z)(h,"no rpc connection"),(0,s.Z)(Z,"wallet not connected"),(0,s.Z)(v,"not seleted amm pool"),(0,s.Z)(void 0!==f,"not set priceUpperTick"),(0,s.Z)(void 0!==x,"not set priceLowerTick"),(0,s.Z)(t,"not set priceUpper"),(0,s.Z)(e,"not set priceLower"),(0,s.Z)(n,"not set coin1"),(0,s.Z)(o,"not set coin1Amount"),(0,s.Z)(i,"not set coin2"),(0,s.Z)(m,"not set coin2Amount"),(0,s.Z)(p,"not set liquidity");let g=(0,c.Dn)(n)||(0,c.Dn)(i),{innerTransactions:P,address:y}=await a.c2c.makeOpenPositionInstructionSimple({connection:h,liquidity:p,poolInfo:v.state,ownerInfo:{feePayer:Z,wallet:Z,tokenAccounts:b,useSOLBalance:g},tickLower:Math.min(x,f),tickUpper:Math.max(x,f),slippage:.015,computeBudgetConfig:await (0,d.u)(),checkCreateATAOwner:!0});return{innerTransactions:P,nftAddress:String(y.nftMint)}}},52784:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(67294),l=n(3363),s=n(4465),o=n(94678);function a(e){let t=(0,o.ZP)(e=>e.coin1),n=(0,o.ZP)(e=>e.coin2),a=(0,o.ZP)(e=>e.hydratedAmmPools),r=(0,o.ZP)(e=>e.currentAmmPool),c=(0,i.useCallback)(e=>{let t=void 0!==r&&1===e.filter(e=>(0,l.ZP)(e.state.id)===r.idString).length;return t},[r]);(0,i.useEffect)(()=>{if(!a.length||!t||!n){o.ZP.setState({selectableAmmPools:void 0,currentAmmPool:void 0});return}let i=a.filter(e=>(0,s.aT)(e.state.mintA.mint,t.mint)&&(0,s.aT)(e.state.mintB.mint,n.mint)||(0,s.aT)(e.state.mintA.mint,n.mint)&&(0,s.aT)(e.state.mintB.mint,t.mint)),l=c(i);o.ZP.setState(e||l?{selectableAmmPools:i}:{selectableAmmPools:i,currentAmmPool:i[0]})},[t,n,a,e])}},76961:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(67294),l=n(75640),s=n(91371),o=n(34003),a=n(3363),r=n(62952),c=n(4465),d=n(81451),u=n(51523),m=n(71375),p=n(94678);function x(){let e=(0,s.ZP)(e=>e.slippageTolerance),t=(0,p.ZP)(e=>e.coin1),n=(0,p.ZP)(e=>e.coin1Amount),x=(0,p.ZP)(e=>e.priceUpperTick),f=(0,p.ZP)(e=>e.coin2),v=(0,p.ZP)(e=>e.coin2Amount),b=(0,p.ZP)(e=>e.priceLowerTick),h=(0,p.ZP)(e=>e.userCursorSide),Z=(0,p.ZP)(e=>e.isRemoveDialogOpen),g=(0,p.ZP)(e=>e.currentAmmPool),P=(0,p.ZP)(e=>e.targetUserPositionAccount),y=(0,p.ZP)(e=>e.isInput),j=(0,i.useMemo)(()=>Z?0:e,[Z,e]),N=(0,i.useMemo)(()=>{if(g&&P){var e;return null===(e=g.positionAccount)||void 0===e?void 0:e.find(e=>(0,a.ZP)(e.nftMint)===(0,a.ZP)(P.nftMint))}},[g,P]),S=(0,i.useCallback)(()=>{if((0,o.Z)(g,"not pool info"),(0,o.Z)(t,"not set coin1"),(0,o.Z)(void 0!==x,"not set priceUpperTick"),(0,o.Z)(f,"not set coin2"),(0,o.Z)(void 0!==b,"not set priceLowerTick"),Z&&!1===y)return;let e="coin1"===h,i=(0,c.aT)(t.mint,g.state.mintA.mint),s=e?n:v,a=void 0!==s&&""!==s,j=e?(0,m.Z)((0,u.dC)(null!=n?n:0,10**t.decimals)):(0,m.Z)((0,u.dC)(null!=v?v:0,10**f.decimals)),{liquidity:S,amountSlippageA:k,amountSlippageB:w}=Z&&N&&P&&P.amountA&&P.amountB&&(0,d.$u)(N.liquidity)?function(e,t,n,i,l){let s=(0,u.hi)(e,l?n:i),o=(0,m.Z)(l?(0,u.dC)(i,s):(0,u.dC)(n,s));return{liquidity:(0,m.Z)((0,u.dC)(t,s)),amountSlippageA:l?e:o,amountSlippageB:l?o:e,amountA:l?e:o,amountB:l?o:e}}(j,null==N?void 0:N.liquidity,(0,m.Z)(N.amountA),(0,m.Z)(N.amountB),e):l.c2c.getLiquidityAmountOutFromAmountIn({poolInfo:g.state,slippage:0,inputA:e&&i||!i&&!e,tickUpper:Math.max(x,b),tickLower:Math.min(b,x),amount:j,add:!Z});e?p.ZP.setState({coin2Amount:a?(0,r.n)(f,i?w:k).toFixed():void 0}):p.ZP.setState({coin1Amount:a?(0,r.n)(t,i?k:w).toFixed():void 0}),p.ZP.setState({liquidity:S})},[t,n,x,f,v,b,h,g,Z,y,P,N,j]);(0,i.useEffect)(()=>{try{S()}catch(e){console.log("still can't calc amount",e instanceof Error?e.message:e)}},[S])}},475:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var i=n(62512);async function l(){var e;let t=await (0,i.Z)("https://solanacompass.com/api/fees",{cacheFreshTime:3e5}),{avg:n}=null!==(e=null==t?void 0:t[15])&&void 0!==e?e:{};if(n)return{units:4e5,microLamports:Math.min(Math.ceil(1e6*n/4e5),25e3)}}},54531:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(85893);n(67294);var l=n(66180),s=n(70745),o=n(51800);function a(e){let{token1:t,token2:n,size:a,className:r,CoinAvatar1:c,CoinAvatar2:d}=e;return(0,i.jsxs)(o.Z,{className:(0,l.m)("-space-x-1",r),children:[(0,i.jsx)(s.Z,{size:a,token:t,...c}),(0,i.jsx)(s.Z,{size:a,token:n,...d})]})}},40816:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(85893),l=n(67294),s=n(66180);function o(e){let{classNames:t,tabs:n,selectedValue:o,onChange:a,tabClassName:r}=e,c=(0,l.useCallback)(e=>{null==a||a(n.find(t=>t.value===e.currentTarget.dataset.val))},[a,n]);return(0,i.jsx)("div",{className:(0,s.m)("flex rounded-lg p-1 bg-dark-blue",t),children:n.map(e=>{let t=o===e.value;return(0,i.jsx)("div",{onClick:t?void 0:c,"data-val":e.value,className:(0,s.m)("flex text-xs text-[#39D0D8] ".concat(t?"bg-active-tab-bg cursor-default":"cursor-pointer opacity-50"),e.className),children:(0,i.jsx)("div",{className:"py-1 px-2.5",children:e.label})},e.value)})})}},18074:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(81451),l=n(51523),s=n(84207),o=n(72573),a=n(99881);function r(e,t){try{var n,r;let c=(0,s.Z)(null!=e?e:0),d=c.mul((null==t?void 0:t.alreadyPercented)?1:100).toFixed(null!==(n=null==t?void 0:t.fixed)&&void 0!==n?n:2);if((0,i.eq)(c,0))return"0%";if(!(null==t?void 0:t.exact)&&d===0..toFixed(null!==(r=null==t?void 0:t.fixed)&&void 0!==r?r:2))return(null==t?void 0:t.alwaysSigned)?"<+0.01%":"<0.01%";return(null==t?void 0:t.alwaysSigned)?"".concat((0,i.gt)(d,0)?"+":"-").concat((0,a.Z)((0,i.gt)(d,0)?(0,o.B)(d):(0,o.B)((0,l.dC)(d,-1))),"%"):"".concat((0,a.Z)(d,{fractionLength:null==t?void 0:t.fixed}),"%")}catch(e){return"0%"}}},48678:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var i=n(81451),l=n(72573);function s(e){if(null==e||e.toString().includes("Infinity")||isNaN(e))return"";let t=e?(0,l.B)(e):"";return(0,i.eq)(t,0)?"":t}},7931:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var i=n(67294),l=n(12839);function s(e,t,n){var s;let o="all .4s cubic-bezier(0.4, 0, 0.2, 1)",[a,r]=(0,i.useState)(null!==(s=null==n?void 0:n.defaultHasWrapped)&&void 0!==s&&s);(0,i.useEffect)(function(){if(l.N9||!(null==n?void 0:n.defaultHasWrapped))return;let i=e.current,s=t.current;if(!i||!s)return;let o=i.getBoundingClientRect(),a=s.getBoundingClientRect(),r=a.top-o.top,c=o.top<a.top?1:-1;i.style.setProperty("transition",""),s.style.setProperty("transition",""),i.style.setProperty("transform","translateY(".concat(r*c,"px)")),s.style.setProperty("transform","translateY(".concat(-r*c,"px)"))},[]);let c=(0,i.useCallback)(()=>{let n=e.current,i=t.current;if(!n||!i)return;let l=n.getBoundingClientRect(),s=i.getBoundingClientRect(),c=s.top-l.top,d=l.top<s.top?1:-1;n.style.setProperty("transition",o),i.style.setProperty("transition",o),a?(n.style.setProperty("transform","translateY(0px)"),i.style.setProperty("transform","translateY(0px)"),r(!1)):(n.style.setProperty("transform","translateY(".concat(c*d,"px)")),i.style.setProperty("transform","translateY(".concat(-c*d,"px)")),r(!0))},[a,e,t]),d=(0,i.useCallback)(()=>{let n=e.current,i=t.current;n&&i&&(n.style.setProperty("transition",o),i.style.setProperty("transition",o),n.style.setProperty("transform","translateY(0px)"),i.style.setProperty("transform","translateY(0px)"))},[a,e,t]);return(0,i.useEffect)(()=>{let n=e.current,i=t.current,l=()=>{null==n||n.style.setProperty("pointerEvents","none")},s=()=>{null==n||n.style.setProperty("pointerEvents","")};return null==n||n.addEventListener("transitionstart",l),null==n||n.addEventListener("transitionend",s),null==i||i.addEventListener("transitionstart",l),null==i||i.addEventListener("transitionend",s),()=>{null==n||n.removeEventListener("transitionstart",l),null==n||n.removeEventListener("transitionend",s),null==i||i.removeEventListener("transitionstart",l),null==i||i.removeEventListener("transitionend",s)}},[e,t]),[a,{toggleSwap:c,resetSwapPosition:d}]}},58625:function(e,t,n){"use strict";n.d(t,{a:function(){return x}});var i=n(85893),l=n(53002),s=n(51523),o=n(81451),a=n(42186),r=n(72573),c=n(48162),d=n(28948),u=n(51800),m=n(92618),p=n(66180);function x(e){let{solLeastBalance:t,className:n,tooltipText:x}=e,f=(0,l.Z)(e=>e.solBalance),v=(0,s.hi)(f,10**a.Bk);return(0,i.jsx)(d.U,{children:v&&(0,o.lt)(v,null!=t?t:a.kn)&&(0,o.eg)(v,0)&&(0,i.jsxs)(u.Z,{className:(0,p.m)("text-sm mt-2 text-[#D8CB39] items-center justify-center",n),children:["SOL balance: ",(0,r.B)(v)," ",(0,i.jsxs)(m.Z,{placement:"bottom-right",children:[(0,i.jsx)(c.Z,{size:"sm",heroIconName:"question-mark-circle",className:"ml-2 cursor-help"}),(0,i.jsx)(m.Z.Panel,{children:(0,i.jsx)("p",{className:"w-80",children:null!=x?x:"SOL is needed for Solana network fees. A minimum balance of ".concat(null!=t?t:a.kn," SOL is\n                recommended to avoid failed transactions. This swap will leave you with less than \n                ").concat(null!=t?t:a.kn," SOL.")})})]})]})})}},99023:function(e,t,n){"use strict";n.d(t,{Mn:function(){return o},dO:function(){return a}});var i=n(81451),l=n(51523),s=n(84207);function o(e){return e.map(e=>{let{liquidity:t,price:n}=e;return{x:Number(n),y:Number(t)}})}function a(e){let{coin1Amount:t,coin2Amount:n,currentPrice:o,coin1InputDisabled:a,coin2InputDisabled:r}=e,[c,d]=[(a?"0":t)||"0",r?"0":n],[u,m]=[(0,i.gt)(c,0),(0,i.gt)(d,0)],p=(0,s.Z)(d||"0"),x=o?u?(0,l.dC)(c,o).add(p):m?p:(0,s.Z)(1):(0,s.Z)(1);try{let e=o?(0,l.hi)((0,l.dC)(c,o),x).mul(100).toFixed(1):"0",t=o?(0,l.hi)(p,x).mul(100).toFixed(1):"0";return{ratio1:e,ratio2:t}}catch(e){return{}}}},34472:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eI}});var i,l,s=n(85893),o=n(91371),a=n(62512),r=n(72616),c=n(51523),d=n(26842),u=n(94678),m=n(59277);function p(){let e=(0,u.ZP)(e=>e.availableAmmConfigFeeOptions),t=(0,o.ZP)(e=>e.inDev),n=(0,m.Z)(e=>e.apiUrls.ammV3Configs);(0,d.Z)(async()=>{if(null==e?void 0:e.length)return;let i=await (0,a.Z)(n),l=t?{AjUvAGNuLJiXXGRQ1uiH4v6fBUJm1zwjBwyfK1qe27Ce:{id:"AjUvAGNuLJiXXGRQ1uiH4v6fBUJm1zwjBwyfK1qe27Ce",index:0,protocolFeeRate:12e3,tradeFeeRate:100,fundFeeRate:100,fundOwner:"",tickSpacing:1,description:"Dev"},ABPi23j9qDjCeK5WwutWn6XG8sMRV7AiG1Z5bP8cViuz:{id:"ABPi23j9qDjCeK5WwutWn6XG8sMRV7AiG1Z5bP8cViuz",index:0,protocolFeeRate:12e3,tradeFeeRate:2500,fundFeeRate:2500,fundOwner:"",tickSpacing:60,description:"Dev"},"85JxuepKfJsmb29ZKThuod3yeBS4dXmsCQUbeo1utpeX":{id:"85JxuepKfJsmb29ZKThuod3yeBS4dXmsCQUbeo1utpeX",index:0,protocolFeeRate:12e3,tradeFeeRate:100,fundFeeRate:100,fundOwner:"",tickSpacing:10,description:"Dev"}}:null==i?void 0:i.data;l&&u.ZP.setState({availableAmmConfigFeeOptions:Object.values(l).map(e=>({...e,original:e,protocolFeeRate:(0,r.y)((0,c.hi)(e.protocolFeeRate,1e4),{alreadyDecimaled:!0}),tradeFeeRate:(0,r.y)((0,c.hi)(e.tradeFeeRate,1e4),{alreadyDecimaled:!0})}))})},[t,n])}var x=n(76961),f=n(31555),v=n(43067),b=n(6994),h=n(76104),Z=n(54592),g=n(28948),P=n(48162),y=n(57571),j=n(51800),N=n(9191),S=n(47857),k=n(6262),w=n(34003),C=n(8667),A=n(13039),T=n(81451),L=n(71375),I=n(84207),B=n(72573),F=n(75640),M=n(47511),U=n(67294),R=n(96662),E=n(27713),O=n(475),D=n(19036),z=n(53002),_=n(1684);async function q(){var e;let{coin1:t,coin2:n,userSelectedAmmConfigFeeOption:i,userSettedCurrentPrice:l,focusSide:s,ammPoolStartTime:o}=u.ZP.getState(),{connection:a}=R.ZP.getState(),{owner:r}=z.Z.getState(),{programIds:d}=m.Z.getState();(0,w.Z)(a,"connection is not ready"),(0,w.Z)(t,"not set coin1"),(0,w.Z)(n,"not set coin2"),(0,w.Z)(i,"not set userSelectedAmmConfigFeeOption"),(0,w.Z)(l,"not set userSettedCurrentPrice");let p=(0,T.$u)(l)?"coin1"===s?(0,I.Z)(l):(0,c.hi)(1,l):(0,I.Z)(0),x=(0,L.Z)((null!==(e=null==o?void 0:o.getTime())&&void 0!==e?e:0)/1e3),{innerTransactions:f,address:v}=await F.c2c.makeCreatePoolInstructionSimple({connection:a,programId:d.CLMM,mint1:{mint:t.mint,decimals:t.decimals},mint2:{mint:n.mint,decimals:n.decimals},ammConfig:(0,D.R)(i.original),initialPrice:(0,E.I2)(p,15),owner:null!=r?r:M.nh.default,computeBudgetConfig:await (0,O.u)(),startTime:x}),b=F.c2c.makeMockPoolInfo({ammConfig:(0,D.R)(i.original),mint1:{mint:t.mint,decimals:t.decimals},mint2:{mint:n.mint,decimals:n.decimals},owner:null!=r?r:M.nh.default,programId:d.CLMM,createPoolInstructionSimpleAddress:v,initialPrice:(0,E.I2)(p,15),startTime:x});u.ZP.setState({tempDataCache:f}),u.ZP.setState({currentAmmPool:(0,_.Z)({state:b})})}var H=n(94355),G=n(70745),X=n(54531),W=n(97664),Y=n(25194),J=n(60421),V=n(72259),K=n(18074),$=n(62952),Q=n(95865),ee=n(4465),et=n(14209),en=n(22305),ei=n(99779),el=n(7931),es=n(92224),eo=n(90482),ea=n(66180),er=n(99023),ec=n(58625),ed=n(87980),eu=n(52784),em=n(3363),ep=n(92618);function ex(e){let{className:t}=e,n=(0,u.ZP)(e=>e.selectableAmmPools),i=null==n?void 0:n.map(e=>(0,em.ZP)(e.ammConfig.id)),l=(0,u.ZP)(e=>e.userSelectedAmmConfigFeeOption),o=(0,u.ZP)(e=>e.availableAmmConfigFeeOptions);return p(),(0,eu.Z)(!0),!function(){let e=(0,u.ZP)(e=>e.coin1),t=(0,u.ZP)(e=>e.coin2),n=(0,u.ZP)(e=>e.selectableAmmPools),i=null==n?void 0:n.map(e=>(0,em.ZP)(e.ammConfig.id)),l=(0,u.ZP)(e=>e.availableAmmConfigFeeOptions),s=null==l?void 0:l.filter(e=>!(null==i?void 0:i.includes(e.id))),o=null==s?void 0:s.map(e=>e.id).join("_");(0,U.useEffect)(()=>{if(s&&e&&t){let e=s.find(e=>(0,T.eq)(e.tradeFeeRate,.0025));u.ZP.setState({userSelectedAmmConfigFeeOption:e})}else u.ZP.setState({userSelectedAmmConfigFeeOption:void 0})},[o,e,t])}(),(0,s.jsx)(ef,{configs:o,current:l,existIds:i,className:t})}function ef(e){let{configs:t,current:n,existIds:i,className:l}=e,o=(0,u.ZP)(e=>e.coin1),a=(0,u.ZP)(e=>e.coin2);return(0,s.jsx)(j.Z,{className:(0,ea.m)("gap-2",l),children:null==t?void 0:t.map(e=>{let t=e.id===(null==n?void 0:n.id),l=null==i?void 0:i.includes(e.id),r=o&&a&&!l;return(0,s.jsxs)(ep.Z,{disable:!l,children:[(0,s.jsxs)("div",{className:"relative grow items-stretch px-1.5 py-2 ".concat(t?"ring-inset ring-1.5 ring-[#abc4ff]":"ring-inset ring-1.5 ring-[#abc4ff60]"," rounded-xl ").concat(r?"clickable-no-transform select-none":"opacity-30 cursor-not-allowed"),onClick:()=>{r&&u.ZP.setState({userSelectedAmmConfigFeeOption:e})},children:[t?(0,s.jsx)("div",{className:"absolute p-0.5 rounded-full right-1 top-1 -translate-y-1/2 translate-x-1/2 z-10 text-[#abc4ff] bg-[#18225d]",children:(0,s.jsx)(P.Z,{heroIconName:"check-circle",size:"smi"})}):null,(0,s.jsx)("div",{className:"text-white font-medium text-sm mb-2",children:(0,K.Z)(e.tradeFeeRate,{fixed:4})}),(0,s.jsx)("div",{className:"text-[#abc4ff80] text-xs",children:e.description})]}),(0,s.jsx)(ep.Z.Panel,{children:"Already created"})]},e.id)})})}var ev=n(65927),eb=n(48678),eh=n(56419);let eZ=e=>Math.min(e+2,15);function eg(e){var t,n,i,l;let{startTime:o,open:a,coin1:r,coin2:c,coin1Amount:d,coin2Amount:u,focusSide:m,decimals:p,currentPrice:x,position:f,totalDeposit:h,inRange:g,feeRate:y,onConfirm:N,onClose:S}=e,k=U.useRef(!1),w=Math.min(p,6),C=U.useCallback(e=>{null==N||N(e),k.current=!0},[S]),A=U.useCallback(()=>{S()},[S]),T=(0,B.B)(null==f?void 0:f.min,{decimalLength:15,maxSignificantCount:eZ(w)}),L=(0,B.B)(null==f?void 0:f.max,{decimalLength:15,maxSignificantCount:eZ(w)}),I=(null!==(i=null===(t=(0,en.Z)(T).dec)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>10,F=(null!==(l=null===(n=(0,en.Z)(L).dec)||void 0===n?void 0:n.length)&&void 0!==l?l:0)>10;return(0,s.jsx)(ev.Z,{open:a,onClose:A,children:e=>{var t,n;let{close:i}=e;return(0,s.jsxs)(b.Z,{className:(0,ea.m)("p-6 mobile:py-4 mobile:px-2 rounded-3xl w-[min(480px,95vw)] mx-8 border-1.5 border-[rgba(171,196,255,0.2)]  bg-cyberpunk-card-bg shadow-cyberpunk-card"),size:"lg",children:[(0,s.jsxs)(j.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,s.jsxs)("div",{className:"text-xl font-semibold text-white mobile:text-base",children:["Preview Deposit to ",null==r?void 0:r.symbol," / ",null==c?void 0:c.symbol]}),(0,s.jsx)(P.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:i})]}),(0,s.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,s.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"My Position"}),(0,s.jsxs)("div",{className:"text-sm flex leading-[18px] flex-col pt-2.5",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2.5",children:[(0,s.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,s.jsx)(G.Z,{className:"inline-block mr-1",size:"sm",token:r}),null==r?void 0:r.symbol]}),(0,s.jsxs)("span",{children:[(0,B.B)(d)," ",null==r?void 0:r.symbol]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,s.jsx)(G.Z,{className:"inline-block mr-1",size:"sm",token:c}),null==c?void 0:c.symbol]}),(0,s.jsxs)("span",{children:[(0,B.B)(u)," ",null==c?void 0:c.symbol]})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-2 pl-1",children:[(0,s.jsx)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:"Fee tier"}),(0,s.jsx)("span",{children:y})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,s.jsxs)("div",{className:"text-sm flex justify-between leading-[18px] mb-2 font-medium mobile:text-xs",children:[(0,s.jsx)("span",{className:"flex text-sm leading-[18px] text-secondary-title mr-2",children:"Current Price"}),x?(0,eb.C)((0,B.B)(x,{decimalLength:15})):"0"," ",null===(t="coin1"===m?c:r)||void 0===t?void 0:t.symbol," per ",null===(n="coin1"===m?r:c)||void 0===n?void 0:n.symbol]}),(0,s.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,s.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Selected Range"}),(0,s.jsx)("span",{children:g?(0,s.jsxs)(j.Z,{className:"items-center bg-[#142B45] rounded text-xs text-[#39D0D8] py-0.5 px-1 ml-2",children:[(0,s.jsx)(P.Z,{size:"xs",iconSrc:"/icons/check-circle.svg"}),(0,s.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"In Range"})]}):(0,s.jsxs)(j.Z,{className:"items-center bg-[#DA2EEF]/10 rounded text-xs text-[#DA2EEF] py-0.5 px-1 ml-2",children:[(0,s.jsx)(P.Z,{size:"xs",iconSrc:"/icons/warn-stick.svg"}),(0,s.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"Out of Range"})]})})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,s.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Min Price"}),(0,s.jsx)("div",{className:"my-3 ".concat(I?"text-lg mobile:text-sm":"text-xl mobile:text-base"),children:T}),(0,s.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==c?void 0:c.symbol," per ",null==r?void 0:r.symbol]})]}),(0,s.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,s.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Max Price"}),(0,s.jsx)("div",{className:"my-3 ".concat(F?"text-lg mobile:text-sm":"text-xl mobile:text-base"),children:L}),(0,s.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==c?void 0:c.symbol," per ",null==r?void 0:r.symbol]})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,s.jsx)("span",{className:"text-lg",children:h})]}),o&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Start Time"}),(0,s.jsx)("span",{className:"",children:(0,eh.xn)(o)})]})]}),(0,s.jsx)(Z.Z,{className:"items-center mt-5 mobile:mt-3",children:(0,s.jsx)("div",{className:"self-stretch",children:(0,s.jsx)(Z.Z,{children:(0,s.jsx)(v.Z,{className:"frosted-glass-teal",onClick:()=>C(i),children:"Create Pool and Deposit"})})})})]})}})}function eP(){return(0,s.jsx)("div",{className:"flex mb-4 px-5 h-[91px] mobile:h-[75px] items-center text-secondary-title opacity-50 bg-dark-blue rounded-xl",children:"Select Token"})}function ey(){return(0,s.jsxs)("div",{className:"absolute text-sm flex flex-col text-center justify-center items-center p-2 w-full h-full bg-[#141041] bg-opacity-80 z-10 rounded-xl",children:[(0,s.jsx)(P.Z,{className:"mb-1",heroIconName:"lock-closed",size:"sm"}),"Current price is outside your selected range. Single-asset deposit only."]})}function ej(e){let{decimals:t,minValue:n,maxValue:i,onPriceChange:o,onInDecrease:a,onBlur:r}=e;return(0,s.jsxs)("div",{className:"flex gap-2.5",children:[(0,s.jsx)(V.Z,{className:"grow",label:"Min Price",decimalMode:!0,showPlusMinusControls:!0,decimalCount:t,value:n,maxN:i?Number(i):void 0,onBlur:()=>null==r?void 0:r({side:l.Low,val:n}),increaseFn:()=>a({val:n,side:l.Low,isIncrease:!0}),decreaseFn:()=>a({val:n,side:l.Low,isIncrease:!1}),onUserInput:(e,t)=>{let{triggerBy:n}=t;e&&"increase-decrease"!==n&&o({val:e,side:l.Low})}}),(0,s.jsx)(V.Z,{className:"grow",label:"Max Price",decimalMode:!0,showPlusMinusControls:!0,decimalCount:t,value:i,minN:n?Number(n):void 0,onBlur:()=>null==r?void 0:r({side:l.Upper,val:i}),increaseFn:()=>a({val:i,side:l.Upper,isIncrease:!0}),decreaseFn:()=>a({val:i,side:l.Upper,isIncrease:!1}),onUserInput:(e,t)=>{let{triggerBy:n}=t;e&&"increase-decrease"!==n&&o({val:e,side:l.Upper})}})]})}(i=l||(l={})).Low="priceLower",i.Upper="priceUpper";var eN=n(40816);let eS="mobile:justify-center mobile:w-1/2";function ek(e){let{coin1:t,coin2:n,focusSide:i,onChangeFocus:l}=e,o=(0,U.useMemo)(()=>{let e=[];return t&&e.push({label:"".concat(t.symbol||"Unknown"," price"),value:t.id,className:eS}),n&&e.push({label:"".concat(n.symbol||"Unknown"," price"),value:n.id,className:eS}),e},[t,n]),a=(0,U.useCallback)(e=>{l(e.value===n.id?"coin2":"coin1")},[n]);return(0,s.jsx)("div",{className:"flex justify-between items-center mobile:flex-col mobile:items-baseline mobile:mb-3",children:t&&n&&(0,s.jsx)(eN.Z,{classNames:"ml-4 mobile:w-full mobile:ml-0",tabs:o,selectedValue:"coin1"===i?t.id:null==n?void 0:n.id,onChange:a})})}let ew=e=>{let{side:t,price:n,tick:i}=e;return t===l.Low?{[t]:n,priceLowerTick:i}:{[t]:n,priceUpperTick:i}};function eC(){var e,t,n,i,a,r,d;!function(){let{coin1:e,coin2:t,userSelectedAmmConfigFeeOption:n,userSettedCurrentPrice:i,ammPoolStartTime:l}=(0,u.ZP)(),s=(0,R.ZP)(e=>e.connection),o=(0,z.Z)(e=>e.owner);(0,U.useEffect)(()=>{s&&e&&t&&i&&n&&q().catch(()=>{u.ZP.setState({tempDataCache:void 0,currentAmmPool:void 0})})},[(0,B.B)(i),e,t,n,i,l,o,s])}();let[m,{off:p,on:x}]=(0,es.ZP)(!1),h=(0,o.ZP)(e=>e.isMobile),y=(0,z.Z)(e=>e.connected),N=(0,z.Z)(e=>e.checkWalletHasEnoughBalance),F=(0,H.Z)(e=>e.popConfirm),M=(0,o.ZP)(e=>e.isApprovePanelShown),E=(0,u.ZP)(e=>e.currentAmmPool),O=(0,u.ZP)(e=>e.coin1),D=(0,u.ZP)(e=>e.coin2),_=(0,u.ZP)(e=>e.coin1Amount),G=(0,u.ZP)(e=>e.coin2Amount),ed=(0,u.ZP)(e=>e.focusSide),eu=(0,u.ZP)(e=>e.priceLower),em=(0,u.ZP)(e=>e.priceUpper),ep=(0,u.ZP)(e=>e.ammPoolStartTime),ef=(0,u.ZP)(e=>e.userSettedCurrentPrice),ev=(0,u.ZP)(e=>e.userSelectedAmmConfigFeeOption),eb=(null===(e=(0,en.Z)((0,et.Lu)((null==ef?void 0:ef.toString())||"")).dec)||void 0===e?void 0:e.length)||0,eh=(0,U.useRef)({[l.Low]:void 0,[l.Upper]:void 0}),eZ=(0,U.useRef)(),eN=(0,U.useRef)(),[eS,eC]=(0,U.useState)([]),[eT,eL]=(0,U.useState)({[l.Low]:void 0,[l.Upper]:void 0}),eI=(0,U.useCallback)(e=>eC(t=>[new eo.Z((null==e?void 0:e.numerator.toString())||0).div((null==e?void 0:e.denominator.toString())||1).toFixed(20),t[1]]),[]),eB=(0,U.useCallback)(e=>eC(t=>[t[0],new eo.Z((null==e?void 0:e.numerator.toString())||0).div((null==e?void 0:e.denominator.toString())||1).toFixed(20)]),[]),eF="".concat(null==E?void 0:E.idString,"-").concat(ed),eM=(0,U.useMemo)(()=>eS.filter(e=>!!e).reduce((e,t)=>e.add((0,I.Z)(t)),(0,I.Z)(0)),[eS]),eU=O||D?Math.max(null!==(n=null==O?void 0:O.decimals)&&void 0!==n?n:0,null!==(i=null==D?void 0:D.decimals)&&void 0!==i?i:0):6,eR=(0,ee.aT)(null==E?void 0:E.state.mintA.mint,O),eE="coin1"===ed,eO=(0,U.useMemo)(()=>Math.pow(-1,eR?eE?0:1:eE?1:0),[eR,eE]),[eD,ez]=(0,U.useState)({}),e_=(0,S.z)(()=>{ez({...u.ZP.getState()}),x()});(0,U.useEffect)(()=>{E&&(eN.current=E)},[E]),(0,U.useEffect)(()=>()=>{u.ZP.getState().userSettedCurrentPrice&&u.ZP.setState({userSettedCurrentPrice:(0,c.hi)(1,u.ZP.getState().userSettedCurrentPrice)})},[ed]);let eq=E&&void 0!==ef&&void 0!==eu&&void 0!==em?[(0,L.Z)(em||0,eU).lt((0,L.Z)(ef||0,eU)),(0,L.Z)(eu||0,eU).gt((0,L.Z)(ef||0,eU))]:[!1,!1];eE||eq.reverse();let[eH,eG]=eq,eX=(0,U.useRef)(null),eW=(0,U.useRef)(null),[,{toggleSwap:eY}]=(0,el.H)(eX,eW);(0,ei.P)(e=>{let[t]=e;t&&t!==ed&&eY()},[ed]);let eJ=(0,U.useCallback)(e=>Number((0,I.Z)(e).toFixed(Math.max(eU+2,eb))),[eb,eU]);(0,U.useEffect)(()=>()=>u.ZP.setState({focusSide:"coin1",userCursorSide:"coin1",totalDeposit:void 0}),[]),(0,U.useEffect)(()=>u.ZP.setState({totalDeposit:eM}),[eM]);let eV=(0,U.useRef)(!1),eK=!O||!D||!E,e$=(0,U.useCallback)(e=>u.ZP.setState({focusSide:e}),[]),eQ=(0,U.useCallback)((e,t)=>u.ZP.setState({[t]:e}),[]),e0=(0,S.z)(e=>{let{side:t,val:n}=e;if(eK)return;let i=(0,k.yc)({p:n,coin1:O,coin2:D,reverse:!eE,ammPool:E});i&&(eh.current[t]=i.tick,eL(e=>({...e,[t]:eJ(n)})),eV.current=!0)});(0,U.useEffect)(()=>{var e,t;if(!ef){eL({[l.Low]:void 0,[l.Upper]:void 0});return}e2({side:l.Upper,val:null===(e=(0,c.dC)(ef,1.5))||void 0===e?void 0:e.toFixed(20),skipCheck:!0,noTimeOut:!0}),e2({side:l.Low,val:null===(t=(0,c.dC)(ef,.5))||void 0===t?void 0:t.toFixed(20),skipCheck:!0})},[ef,e0,eF,eU]);let e1=(0,S.z)(()=>{if(E&&void 0!==eT[l.Low]&&void 0!==eT[l.Upper]&&eT[l.Low]>=eT[l.Upper]){let e=eE?O:D,t=eh.current[l.Upper]-E.state.tickSpacing*eO,{price:n,tick:i}=(0,k.Ek)({poolInfo:E.state,baseIn:(0,ee.aT)(E.state.mintA.mint,null==e?void 0:e.mint),tick:t});eh.current[l.Low]=i,u.ZP.setState({priceLowerTick:i,priceLower:n}),eL(e=>({...e,[l.Low]:eJ(n)}))}}),e2=(0,U.useCallback)(e=>{let{side:t,val:n,skipCheck:i,noTimeOut:l}=e;if(!E||!O||!D||!n)return;let s=()=>{if(eV.current||i){let e=(0,k.yc)({p:n,coin1:O,coin2:D,reverse:!eE,ammPool:E});if(!e)return;eh.current[t]=e.tick,eL(n=>({...n,[t]:eJ(e.price)})),u.ZP.setState(ew({side:t,price:e.price,tick:e.tick}))}eV.current=!1,i||e1()};eZ.current=l?s():window.setTimeout(s,200)},[O,D,null==E?void 0:E.idString,eE,eJ]),e5=(0,S.z)(e=>{let{val:t,side:n,isIncrease:i}=e;if(!E||!O||!D||!t)return 0;eZ&&clearTimeout(eZ.current),eV.current=!1;let s=eE?O:D,o=eh.current[n]+(i?E.state.tickSpacing:-1*E.state.tickSpacing)*Math.pow(-1,eR?eE?0:1:eE?1:0),{price:a}=(0,k.Ek)({poolInfo:E.state,baseIn:(0,ee.aT)(E.state.mintA.mint,null==s?void 0:s.mint),tick:o}),r=Number(a.toFixed(eU));return n===l.Low&&r>=eT[l.Upper]?Number(t):(eh.current[n]=o,u.ZP.setState(ew({side:n,price:a,tick:o})),eL(e=>({...e,[n]:r})),r)}),{ratio1:e4,ratio2:e8}=(0,er.dO)({currentPrice:null!=ef?(0,I.Z)(ef):ef,coin1InputDisabled:eH,coin2InputDisabled:eG,coin1Amount:_,coin2Amount:G}),e6=O&&N((0,$.n)(O,_,{alreadyDecimaled:!0})),e3=D&&N((0,$.n)(D,G,{alreadyDecimaled:!0}));return(0,s.jsxs)(b.Z,{className:(0,ea.m)("flex mobile:flex-col gap-4 p-6 mobile:py-4 mobile:px-2 rounded-3xl w-full border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card"),size:"lg",children:[(0,s.jsxs)(Z.Z,{className:"gap-6 w-1/2 mobile:w-full border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-[#abc4ff] mb-2",children:"Select Tokens"}),(0,s.jsxs)(J.Z,{className:"grid-cols-2 gap-4",children:[(0,s.jsx)(eA,{title:"Base Token",turnOnTokenVerification:!0,tokenKey:"coin1",onSelectToken:eQ,token:O,disableTokens:D?[D]:void 0}),(0,s.jsx)(eA,{title:"Quote Token",turnOnTokenVerification:!0,tokenKey:"coin2",onSelectToken:eQ,token:D,disableTokens:O?[O]:void 0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-[#abc4ff] mb-2",children:"Select Fee"}),(0,s.jsx)(ex,{})]}),(0,s.jsxs)(Z.Z,{className:"gap-4",children:[(0,s.jsxs)(j.Z,{className:"mb-1 justify-between",children:[(0,s.jsx)("div",{className:"font-medium text-[#abc4ff] my-1",children:"Set Starting Price"}),(0,s.jsx)(ek,{coin1:O,coin2:D,focusSide:ed,onChangeFocus:e$})]}),(0,s.jsx)("div",{className:"text-xs bg-[#abc4ff14] p-3 rounded-xl text-[#abc4ff] leading-5",children:"To initialize and create the pool, first set the starting price. Then, enter your price range and deposit amounts."}),(0,s.jsx)(V.Z,{decimalMode:!0,inputClassName:"text-right",prefix:(0,s.jsxs)("span",{className:"text-base text-secondary-title opacity-50",children:["Current ",eE?null==O?void 0:O.symbol:null==D?void 0:D.symbol," Price"]}),suffix:(0,s.jsx)("span",{className:"text-xs text-secondary-title opacity-50",children:eE?null==D?void 0:D.symbol:null==O?void 0:O.symbol}),value:ef,decimalCount:15,onUserInput:e=>{u.ZP.setState({userSettedCurrentPrice:e})}})]}),(0,s.jsxs)("div",{className:E?"":"opacity-50",children:[(0,s.jsx)("div",{className:"text-secondary-title font-medium mb-2",children:"Set Price Range"}),(0,s.jsx)(ej,{decimals:Math.max(null!==(a=null===(t=(0,en.Z)(ef).dec)||void 0===t?void 0:t.length)&&void 0!==a?a:0,eU),minValue:(0,B.B)(eT[l.Low]),maxValue:(0,B.B)(eT[l.Upper]),onBlur:e2,onPriceChange:e0,onInDecrease:e5})]}),(eH||eG)&&(0,s.jsx)(g.U,{children:(0,s.jsxs)("div",{className:"flex items-center p-3 bg-[#2C2B57] rounded-lg text-xs text-[#D6CC56]",children:[(0,s.jsx)(P.Z,{size:"sm",className:"mr-1.5",heroIconName:"exclamation-circle"}),"Your position will not trade or earn fees until price moves into your range."]})})]}),(0,s.jsxs)(Z.Z,{className:"gap-4 w-1/2 mobile:w-full border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,s.jsxs)("div",{className:E?"":"opacity-50 pointer-events-none",children:[(0,s.jsx)(j.Z,{className:"text-secondary-title justify-between mb-2",children:(0,s.jsx)("div",{className:"font-medium text-[#abc4ff] my-1",children:"Deposit Amount"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"relative",ref:eX,children:[eH&&(0,s.jsx)(ey,{}),O?(0,s.jsx)(W.Z,{className:"mb-4 mobile:mt-0 py-2 mobile:py-1 px-3 mobile:px-2",disabled:M,disabledInput:!E,noDisableStyle:!0,value:E?(0,B.B)(_):void 0,haveHalfButton:!0,haveCoinIcon:!0,onPriceChange:eI,onUserInput:e=>{u.ZP.setState({coin1Amount:e,userCursorSide:"coin1"})},token:O}):(0,s.jsx)(eP,{})]}),(0,s.jsxs)("div",{className:"relative",ref:eW,children:[eG&&(0,s.jsx)(ey,{}),D?(0,s.jsx)(W.Z,{className:"py-2 mobile:py-1 px-3 mobile:px-2",disabled:M,noDisableStyle:!0,value:E?(0,B.B)(G):void 0,haveHalfButton:!0,haveCoinIcon:!0,onPriceChange:eB,onUserInput:e=>{u.ZP.setState({coin2Amount:e,userCursorSide:"coin2"})},token:D}):(0,s.jsx)(eP,{})]})]})]}),(0,s.jsxs)("div",{className:"".concat(E?"":"opacity-50 pointer-events-none"," border-1.5 border-[#abc4ff80]  rounded-xl px-3 py-4"),children:[(0,s.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,s.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,s.jsx)("span",{className:"text-lg leading-[18px]",children:E&&((0,T.$u)(_)||(0,T.$u)(G))?(0,Q.Z)(eM):"--"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Deposit Ratio"}),(0,s.jsxs)("span",{className:"text-lg flex leading-[18px]",children:[E&&(0,s.jsx)(X.Z,{size:"sm",token1:O,token2:D}),E&&((0,T.$u)(_)||(0,T.$u)(G))?"".concat(null!=e4?e4:"--","% / ").concat(null!=e8?e8:"--","%"):"--"]})]})]}),(0,s.jsx)(Y.Z,{className:"".concat(E?"":"opacity-50 pointer-events-none"," mb-8"),label:"Start time (Optional):",disableDateBeforeCurrent:!0,canEditSeconds:!0,onDateChange:e=>u.ZP.setState({ammPoolStartTime:e}),showTime:{format:"HH:mm:ss"}}),(0,s.jsxs)(Z.Z,{className:"gap-4 mt-auto",children:[(0,s.jsxs)("div",{className:"flex items-center text-xs p-[12px] rounded-lg text-secondary-title bg-[rgba(171,196,255,0.08)] mt-auto",children:[(0,s.jsx)(P.Z,{size:"sm",heroIconName:"information-circle"}),(0,s.jsxs)("div",{className:"ml-2.5",children:[(0,s.jsx)("span",{className:"font-medium",children:"SOL network fee"}),": Estimated transaction fee for creating a pool is approximately 0.3 SOL, but may vary depending on transaction size."]})]}),(0,s.jsx)(v.Z,{className:"frosted-glass-teal mobile:w-full",size:h?"sm":"lg",validators:[{should:y,forceActive:!0,fallbackProps:{onClick:()=>o.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:O&&D},{should:E,fallbackProps:{children:"Fail to find this pool"}},{should:(0,T.$u)(ef),fallbackProps:{children:"Input Price"}},{should:ev,fallbackProps:{children:"Select a fee option"}},{should:(0,T.$u)(_)||(0,T.$u)(G),fallbackProps:{children:"Input Token Amount"}},{should:e6,fallbackProps:{children:"Insufficient ".concat(null!==(r=null==O?void 0:O.symbol)&&void 0!==r?r:""," balance")}},{should:e3,fallbackProps:{children:"Insufficient ".concat(null!==(d=null==D?void 0:D.symbol)&&void 0!==d?d:""," balance")}}],onClick:()=>{e_()},children:"Preview Pool"}),(0,s.jsx)(ec.a,{tooltipText:"SOL is needed for Solana network fees. A minimum balance of 1 SOL is recommended when creating a pool to avoid failed transactions.",solLeastBalance:1,className:"my-0"})]})]}),(0,s.jsx)(eg,{open:m,coin1:eD.coin1,coin2:eD.coin2,coin1Amount:eD.coin1Amount,coin2Amount:eD.coin2Amount,focusSide:ed,decimals:eU,currentPrice:(0,I.Z)(ef),startTime:ep,position:{min:(0,I.Z)(eD.priceLower).toFixed(eU),max:(0,I.Z)(eD.priceUpper).toFixed(eU)},totalDeposit:(0,Q.Z)(eM),onClose:p,inRange:!eq.find(e=>e),feeRate:(0,K.Z)(null==ev?void 0:ev.tradeFeeRate),onConfirm:()=>{(0,C.ZP)(async e=>{let{transactionCollector:t}=e,{tempDataCache:n}=u.ZP.getState();(0,w.Z)(n,"should create pool first");let{innerTransactions:i}=await (0,A.B)(eD);t.add(n,{txHistoryInfo:{title:"Create pool",description:"create clmm pool"}}),t.add(i,{txHistoryInfo:{title:"Open pool position",description:"Open clmm pool position"}})}).then(e=>{let{allSuccess:t}=e;p(),t&&(u.ZP.getState().refreshConcentrated(),F({type:"success",title:"Pool created successfully!",description:"Do you want to create a farm based on this pool?",confirmButtonIsMainButton:!0,confirmButtonText:"Create Farm",cancelButtonText:"Not Now",onConfirm(){var e,t,n;u.ZP.setState({coin1:null===(e=eN.current)||void 0===e?void 0:e.base,coin2:null===(t=eN.current)||void 0===t?void 0:t.quote,chartPoints:[],lazyLoadChart:!0,currentAmmPool:eN.current}),(0,f.Eh)("/clmm/edit-farm",{queryProps:{farmId:null===(n=eN.current)||void 0===n?void 0:n.idString}})},onCancel(){setTimeout(()=>{u.ZP.setState({coin1:void 0,coin2:void 0,coin1Amount:void 0,coin2Amount:void 0,focusSide:"coin1",userCursorSide:"coin1"}),u.ZP.getState().refreshConcentrated()},400)}}))})}})]})}function eA(e){var t;let{tokenKey:n,title:i,token:l,disableTokens:o,turnOnTokenVerification:a,onSelectToken:r}=e,[c,d]=(0,U.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.Z,{className:"grid items-center bg-[#141041] rounded-xl py-2 cursor-pointer px-3",onClick:()=>d(!0),children:l?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-[#abc4ff80] mb-1",children:i}),(0,s.jsxs)(j.Z,{className:"items-center gap-2",children:[(0,s.jsx)(G.Z,{token:l}),(0,s.jsx)("div",{className:"text-[#abc4ff] font-medium text-lg",children:null!==(t=l.symbol)&&void 0!==t?t:""}),(0,s.jsx)(P.Z,{size:"sm",className:"text-[#abc4ff]",heroIconName:"chevron-down"})]})]}):(0,s.jsxs)(j.Z,{className:"text-[#abc4ff80] text-center gap-1.5 items-center px-3 py-2",children:[(0,s.jsx)("div",{children:i}),(0,s.jsx)(P.Z,{size:"sm",className:"text-[#abc4ff80]",heroIconName:"chevron-down"})]})}),(0,s.jsx)(ed.Z,{open:c,onClose:()=>{d(!1)},turnOnTokenVerification:a,canSelectIfInWhiteList:!0,disableTokens:o,onSelectToken:e=>{null==r||r(e,n)}})]})}function eT(e){let{className:t}=e;return(0,s.jsx)(j.Z,{className:(0,ea.m)("items-center justify-between",t),children:(0,s.jsx)(v.Z,{type:"text",className:"text-sm text-[#ABC4FF] opacity-50 px-0",prefix:(0,s.jsx)(P.Z,{heroIconName:"chevron-left",size:"sm"}),onClick:()=>{(0,f.ES)("/clmm/pools")},children:"Back to Concentrated pools"})})}function eL(e){let{className:t}=e,[n,i]=(0,U.useState)(!1),l=(0,o.ZP)(e=>e.isMobile),[a,r]=(0,U.useState)(!1);(0,U.useEffect)(()=>{let e=(0,N.Jt)("IGNORE_CREATE_CLMM_WARNING");e||i(!0)},[]);let c=(0,S.z)(()=>(0,N.mM)("IGNORE_CREATE_CLMM_WARNING",!0));return(0,s.jsx)(g.Z,{show:n,children:(0,s.jsx)(j.Z,{className:t,children:(0,s.jsxs)(b.Z,{className:"p-6 mobile:p-4 grow rounded-3xl mobile:rounded-2xl ring-1 ring-inset ring-[#39d0d8] bg-[#1B1659]",children:[(0,s.jsx)("div",{className:"mobile:text-sm font-medium text-base text-white mb-3",children:"You can create a farm based on the pool you created!"}),(0,s.jsx)("div",{className:"font-medium text-sm mobile:text-xs text-[#ABC4FF80] mb-4",children:"You can choose to create a farm after creating this pool and providing your position. You can also create a farm based on a previously created pool."}),(0,s.jsxs)(j.Z,{className:"gap-4",children:[(0,s.jsx)(v.Z,{className:"frosted-glass-teal mobile:px-4",size:l?"sm":"md",onClick:()=>{i(!1),a&&c()},children:"Got it"}),(0,s.jsx)(h.X,{checkBoxSize:"sm",className:"my-2 w-max text-sm",onChange:r,label:(0,s.jsx)("div",{className:"text-sm text-white font-medium",children:"Do not show again"})})]})]})})})}function eI(){p(),(0,x.Z)();let e=(0,o.ZP)(e=>e.isMobile);return(0,s.jsxs)(y.Z,{metaTitle:"Create CLMM Pool - Raydium",mobileBarTitle:"Create CLMM Pool",children:[(0,s.jsx)(eT,{className:"mb-8 mobile:mb-2 sticky z-10 top-0 mobile:-translate-y-2 mobile:bg-[#0f0b2f] mobile:hidden"}),(0,s.jsxs)("div",{className:"pb-10 self-center transition-all duration-500 w-[min(840px,70vw)] mobile:w-[90vw] z-20",children:[!e&&(0,s.jsx)("div",{className:"pb-8 text-2xl mobile:text-lg font-semibold justify-self-start text-white",children:"Create Pool"}),(0,s.jsx)(eL,{className:"pb-6 w-full"}),(0,s.jsx)(eC,{}),(0,s.jsx)(Z.Z,{className:"items-center my-8"})]})]})}}},function(e){e.O(0,[4740,7571,8667,7664,7980,5194,9774,2888,179],function(){return e(e.s=71716)}),_N_E=e.O()}]);